# v1.2.2 - Accurate Bandwidth Detection

**Feature Update**: Improved bandwidth detection accuracy to prevent speed regressions on high-speed connections.

## The Problem
Previous versions relied on **Wi-Fi Link Speed** (PHY rate) to estimate available bandwidth.
- **Issue**: Link speed fluctuates and doesn't reflect actual internet throughput.
- **Result**: Users with Gigabit internet but momentary 200Mbps link speed were capped at ~170Mbps by CAKE, wasting 80% of their bandwidth.

## The Solution
`hifi-wifi --apply` now performs a **real speedtest** (using `speedtest-cli`) to measure actual internet throughput.
- **Accurate**: Uses 95% of *measured* speed for CAKE bandwidth limit.
- **Fallback**: If speedtest fails or is offline, falls back to the old link-speed method.
- **Automatic**: Installs `speedtest-cli` if missing (via Homebrew on Bazzite/SteamOS).

## Changes
- **New Dependency**: `speedtest-cli` (auto-installed)
- **Logic Change**: `--apply` runs a 30-60s download test before creating a profile.
- **Fixes**: Solves "160 mbps vs 970 mbps" regression on Bazzite.

## How to Update
1. Update hifi-wifi.
2. Run `sudo hifi-wifi --apply` to re-profile your network with the new detection logic.
